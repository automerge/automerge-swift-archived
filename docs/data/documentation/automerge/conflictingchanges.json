{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Automerge allows different nodes to independently make arbitrary changes to their respective copies of a document."},{"type":"text","text":" "},{"type":"text","text":"In most cases, those changes can be combined without any trouble."},{"type":"text","text":" "},{"type":"text","text":"For example, if users modify two different objects, or two different properties in the same object, then it is straightforward to combine those changes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If users concurrently insert or delete items in a list (or characters in a text document), Automerge preserves all the insertions and deletions."},{"type":"text","text":" "},{"type":"text","text":"If two users concurrently insert at the same position, Automerge arbitrarily places one of the insertions first and the other second, while ensuring that the final order is the same on all nodes."}]},{"anchor":"Conflicting-changes","level":3,"type":"heading","text":"Conflicting changes"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When two collaborators concurrently update the same property in the same object (or, similarly, the same index in the same list), Automerge picks one of the concurrently written values as the “winner”."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Define the model.","struct Coordinate: Codable, Equatable {","    var x: Int?","}","","\/\/ Create the two collaborators","let actor1 = Actor()","let actor2 = Actor()","","\/\/ Initialize documents with known actor IDs.","var doc1 = Document(Coordinate(), actor: actor1)","var doc2 = Document(Coordinate(), actor: actor2)","","\/\/ Set values independently.","doc1.change { proxy in","  proxy.x.set(1)","}","doc2.change { doc in","  doc.x.set(2)","}","","\/\/ Merge the changes in both directions.","doc1.merge(doc2)","doc2.merge(doc1)","","\/\/ Now, `doc1` might be either {x: 1} or {x: 2}.","\/\/ However, `doc2` will be the same, whichever value is ","\/\/ chosen as winner.","\/\/ doc1.content.x == doc2.content.x"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Although only one of the concurrently written values shows up in the object, the other value that was set is not lost."},{"type":"text","text":" "},{"type":"text","text":"Automerge tracks the actor Id and the value that it didn’t pick, and maintains that information as a conflict until that property is updated again."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can inspect the conflicts through the proxy returned from the document using the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Document\/rootProxy()"},{"type":"text","text":" method."},{"type":"text","text":" "},{"type":"text","text":"If the winning value of the property "},{"type":"codeVoice","code":"x"},{"type":"text","text":" is "},{"type":"codeVoice","code":"2"},{"type":"text","text":", then Automerge records a conflict on property "},{"type":"codeVoice","code":"x"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"In the following example, "},{"type":"codeVoice","code":"actor-1"},{"type":"text","text":" is the ID of the actor that “lost” the conflict, and the associated value of the conflict is the value "},{"type":"codeVoice","code":"actor-1"},{"type":"text","text":", the Id of the actor that lost the assignment to the property "},{"type":"codeVoice","code":"x"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["doc1 ","\/\/ {x: 2}","doc2 ","\/\/ {x: 2}","","doc1.rootProxy().conflicts(dynamicMember: \\.x)) ","\/\/ ex: Optional([1@40d336cdd6044c2f9886d5240b7ba91c: Optional(1), 1@554560f135b14f18b8fa37ed999624c2: Optional(2)])","","doc2.rootProxy().conflicts(dynamicMember: \\.x)) ","\/\/ ex: Optional([1@554560f135b14f18b8fa37ed999624c2: Optional(2), 1@40d336cdd6044c2f9886d5240b7ba91c: Optional(1)])"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the information from "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Proxy\/conflicts(dynamicMember:)"},{"type":"text","text":" (or "},{"type":"reference","isActive":true,"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Proxy\/conflicts(index:)"},{"type":"text","text":", used when the model is a list) to hint that the current value over-wrote another value."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The change to a property that is listed in the conflicts, Automerge considers it resolved, and the conflict disappears from the change history."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/automerge\/conflictingchanges"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/ConflictingChanges","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Expose and highlight conflicting changes within a document."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Conflicts in the Change History","role":"article","modules":[{"name":"Automerge"}]},"hierarchy":{"paths":[["doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge"]]},"seeAlsoSections":[{"title":"Getting Started","identifiers":["doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/AutomergeBasics"],"generated":true}],"references":{"doc://org.automerge.Automerge-swift/documentation/Automerge/Proxy/conflicts(dynamicMember:)":{"role":"symbol","title":"conflicts(dynamicMember:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"conflicts"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Y"},{"kind":"text","text":">("},{"kind":"externalParam","text":"dynamicMember"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"KeyPath","preciseIdentifier":"s:s7KeyPathC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Wrapped","preciseIdentifier":"s:9Automerge5ProxyC7Wrappedxmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Y","preciseIdentifier":"s:9Automerge5ProxyC9conflicts13dynamicMemberSDyAA8ObjectIdVqd__GSgs7KeyPathCyxqd__G_tSeRd__SERd__lF1YL_qd__mfp"},{"kind":"text","text":">) -> ["},{"kind":"typeIdentifier","text":"ObjectId","preciseIdentifier":"s:9Automerge8ObjectIdV"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"Y","preciseIdentifier":"s:9Automerge5ProxyC9conflicts13dynamicMemberSDyAA8ObjectIdVqd__GSgs7KeyPathCyxqd__G_tSeRd__SERd__lF1YL_qd__mfp"},{"kind":"text","text":"]?"}],"abstract":[{"type":"text","text":"Returns the conflicts that Automerge has registered while it applied changes to your model."}],"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Proxy\/conflicts(dynamicMember:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/proxy\/conflicts(dynamicmember:)"},"doc://org.automerge.Automerge-swift/documentation/Automerge":{"role":"collection","title":"Automerge","abstract":[{"type":"text","text":"Automerge helps you build collaborative applications by tracking changes and enabling consistent merging of those changes to your models."}],"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge","kind":"symbol","type":"topic","url":"\/documentation\/automerge"},"doc://org.automerge.Automerge-swift/documentation/Automerge/Document/rootProxy()":{"role":"symbol","title":"rootProxy()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"rootProxy"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Proxy","preciseIdentifier":"s:9Automerge5ProxyC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:9Automerge8DocumentV1Txmfp"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"Returns a proxy wrapper for the model document."}],"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Document\/rootProxy()","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/document\/rootproxy()"},"doc://org.automerge.Automerge-swift/documentation/Automerge/AutomergeBasics":{"role":"article","title":"Automerge Basics","abstract":[{"type":"text","text":"Getting started using Automerge in your app."}],"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/AutomergeBasics","kind":"article","type":"topic","url":"\/documentation\/automerge\/automergebasics"},"doc://org.automerge.Automerge-swift/documentation/Automerge/Proxy/conflicts(index:)":{"conformance":{"constraints":[{"type":"codeVoice","code":"Wrapped"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"Collection"},{"type":"text","text":", "},{"type":"codeVoice","code":"Wrapped.Element"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"Decodable"},{"type":"text","text":", "},{"type":"codeVoice","code":"Wrapped.Element"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"Encodable"},{"type":"text","text":", and "},{"type":"codeVoice","code":"Wrapped.Index"},{"type":"text","text":" is "},{"type":"codeVoice","code":"Int"},{"type":"text","text":"."}],"availabilityPrefix":[{"type":"text","text":"Available when"}],"conformancePrefix":[{"type":"text","text":"Conforms when"}]},"role":"symbol","title":"conflicts(index:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"conflicts"},{"kind":"text","text":"("},{"kind":"externalParam","text":"index"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","text":"ObjectId","preciseIdentifier":"s:9Automerge8ObjectIdV"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"Wrapped","preciseIdentifier":"s:9Automerge5ProxyCAASlRzSe7ElementRpzSEAERQSi5IndexRtzlE7Wrappedxmfp"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Element","preciseIdentifier":"s:ST7ElementQa"},{"kind":"text","text":"]?"}],"abstract":[{"type":"text","text":"Returns the conflict at the index location you provide that Automerge has registered while it applied changes to your model."}],"identifier":"doc:\/\/org.automerge.Automerge-swift\/documentation\/Automerge\/Proxy\/conflicts(index:)","kind":"symbol","type":"topic","url":"\/documentation\/automerge\/proxy\/conflicts(index:)"}}}